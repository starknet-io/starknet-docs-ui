<script src="{{{uiRootPath}}}/js/site.js?new"></script>
<script async src="{{{uiRootPath}}}/js/vendor/highlight.js?new"></script>
<script async src="{{{uiRootPath}}}/js/vendor/tabs-block-behaviour.js?new"></script>
<script async src="{{{uiRootPath}}}/js/vendor/swagger-ui.js?new"></script>
<script async src="{{{uiRootPath}}}/js/vendor/component-versions.js?new"></script>
<script src="{{uiRootPath}}/js/vendor/custom.js?new"></script>
<script async src="{{{uiRootPath}}}/js/vendor/tabs.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
{{#if page.component}}
  <!-- Define configuration BEFORE loading chat.js to apply custom settings -->
  <script>
    window.chatExternalConfig = {
      CHAT_TITLE: 'Starknet Assistant',
      CHAT_PLACEHOLDER: 'Ask me anything about Starknet...'
    };
  </script>

  <!-- Load the chat script & styling from the Cairo Book -->
  <script src="https://book.cairo-lang.org/theme/chat.js" async></script>
  <link rel="stylesheet" href="https://book.cairo-lang.org/theme/css/chat.css">

  <!-- Initialize styling with proper variables -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const chatStyles = {
        '--bg': 'white',
        '--links': 'hsl(240, 100.00%, 63.50%)',
        '--sidebar-bg': 'whitesmoke',
        '--fg': '#2a2e30'
      };

      const applyChatStyles = (element) => {
        if (element) {
          for (const property in chatStyles) {
            element.style.setProperty(property, chatStyles[property]);
          }
        }
      };

      const initializeChatStyling = () => {
        // Check if chatManager has created the elements
        const chatWindow = document.getElementById('chat-window');
        const chatButton = document.getElementById('chat-button');

        if (chatWindow && chatButton) {
          // Apply the custom properties directly to the elements
          applyChatStyles(chatWindow);
          applyChatStyles(chatButton);
        } else {
          // If elements aren't ready yet, wait and try again
          // This might happen if chat.js loads *after* DOMContentLoaded due to 'async'
          setTimeout(initializeChatStyling, 100);
        }
      };

      initializeChatStyling();
    });
  </script>
{{/if}}
